********************
 System Description
********************

Modian is a system to generate read-only Debian images with support for
monolithic updates and reverts.

It generates a bootable installer that runs from a bootable USB key and
installs or updates a system composed by a read-only image and a version
choice mechanism on the target machine.

It has the following components:

:doc:`modian-live-wrapper/index`:
   a simplified fork of live-wrapper to generate generic live images;
:doc:`modian-install/index`:
   ;

Bootable installer
==================

The bootable installer generated by Modian is able to do two tasks:
install from scratch a new system, or attempt to recover and update an
existing one.

By default, the behaviour is to try to recover and update, or install
from scratch if no Modian installation can be detected; to create an
image that will always install a new system from scratch it is enough to
change the label of the iso (TODO: to what?).

Installed system
================

Partitions
----------

``modian-install`` creates a number of partitions with predefined labels
that are then mounted by ``modian-common`` on the installed system.

``/``
   mounts the squashfs plus persistence image.
``/live/image``
   mounts the partition with label ``##root##`` where the squashfs and
   persistence images are stored, in case they are needed.
``/var/log``
   mounts the partition with label ``##log##``, so that logs are
   persistent between versions.
``/data``
   mounts the partition with label ``##data``, for persistent user data.

   This may be changed in the future to provide custom partitions and
   mount points, if required.

Persistence
-----------
